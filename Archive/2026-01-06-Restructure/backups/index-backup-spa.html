<!DOCTYPE html>
<html lang="vi" x-data="{ 
        section: 'overview', 
        showLayer: 'arch', 
        darkMode: false, 
        showModal: false, 
        showAudit: false,
        selectedCriteria: 'C2.1',
        selectedIssue: null, 
        liveKwh: 2450.8, temp: 24.2, humid: 55, aqi: 22,
        /* --- DỮ LIỆU VỆ SINH THÔNG LUỒNG --- */
        housekeepingLogs: [],
        lastHkUpdate: 'Đang kết nối...',
        pcccIssue: {
            location: 'Hành lang khu Cấp cứu (Phía Đông)',
            status: 'Cảnh báo: Áp suất thấp (Low Pressure)',
            detail: 'Hệ thống phát hiện sụt giảm áp suất tại cụm vòi phun số 04. Có khả năng rò rỉ tại van chặn tầng 1.',
            action: '1. Kiểm tra trạm bơm bù áp.\n2. Kiểm tra trực tiếp van khu vực C.\n3. Thông báo đội kỹ thuật trực ca.'
        }
    }" :class="{ 'dark': darkMode }">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCP HMIS - Hospital Management Platform</title>
    <meta name="robots" content="noindex, nofollow">

    <!-- External Fonts & Libraries -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        scp: { bg: '#0f172a', card: '#1e293b', primary: '#0d9488', accent: '#22d3ee' }
                    },
                    animation: { 'fade-in': 'fadeIn 0.5s ease-out forwards' },
                    keyframes: { fadeIn: { '0%': { opacity: '0', transform: 'scale(0.98)' }, '100%': { opacity: '1', transform: 'scale(1)' } } }
                }
            }
        }
    </script>

    <!-- Custom Stylesheets -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/components.css">

    <!-- External JavaScript Libraries -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>

    <!-- Application JavaScript Modules -->
    <script src="assets/js/data-service.js"></script>
    <script src="assets/js/charts.js"></script>
    <script src="assets/js/app.js"></script>
</head>

<body :class="darkMode ? 'dark' : 'light'" x-init="
    setInterval(() => { liveKwh = (parseFloat(liveKwh) + 0.5).toFixed(1); }, 2000);
    setInterval(() => { temp = (24 + Math.random()).toFixed(1); humid = Math.floor(50 + Math.random() * 10); aqi = Math.floor(20 + Math.random() * 10); }, 3000);
    startHKFlow($data);
">
    <div class="app-wrapper">
        <aside class="sidebar">
            <div class="logo-frame gap-4">
                <div
                    class="bg-teal-600 w-[56px] h-[56px] flex items-center justify-center rounded-xl shadow-lg text-white text-2xl">
                    <i class="fas fa-hospital-user"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-black tracking-tighter uppercase leading-none"
                        :class="darkMode ? 'text-white' : 'text-teal-900'">SCP HMIS</h1>
                    <p class="text-[9px] opacity-60 uppercase tracking-widest mt-1 font-bold text-teal-600">Medical
                        Center</p>
                </div>
            </div>

            <nav class="flex-grow py-4 overflow-y-auto">
                <div class="px-6 mb-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Hệ thống quản trị
                </div>
                <div @click="section = 'overview'; showAudit = false" :class="section === 'overview' ? 'active' : ''"
                    class="nav-link flex items-center px-6 py-4"><i class="fas fa-chart-line mr-3 w-5 text-lg"></i> Quản
                    lý bệnh viện</div>
                <div @click="section = 'facility'; showAudit = false"
                    :class="section === 'facility' && !showAudit ? 'active' : ''"
                    class="nav-link flex items-center px-6 py-4"><i
                        class="fas fa-layer-group mr-3 w-5 text-lg text-orange-500"></i> Quản lý Cơ sở vật chất <span
                        class="ml-auto bg-orange-500 text-[8px] text-white px-1.5 py-0.5 rounded-full font-bold">3D
                        LAB</span></div>
                <div @click="section = 'facility'; showAudit = true; showLayer = 'fire'"
                    :class="showAudit ? 'active' : ''" class="nav-link flex items-center px-6 py-4"><i
                        class="fas fa-clipboard-check mr-3 w-5 text-lg text-teal-500"></i> 83 Tiêu chí Chất lượng</div>
                <a href="show-app.html" target="_blank" class="nav-link flex items-center px-6 py-4 no-underline"><i
                        class="fas fa-notes-medical mr-3 w-5 text-lg"></i> Ứng dụng Mobile App</a>
                <div class="px-6 mt-6 mb-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Khu vực
                    chuyên môn</div>
                <div class="nav-link flex items-center px-6 py-3"><i class="fas fa-user-injured mr-3 w-5"></i> Danh sách
                    bệnh nhân</div>
                <div class="nav-link flex items-center px-6 py-3"><i class="fas fa-procedures mr-3 w-5"></i> Sơ đồ
                    giường bệnh</div>
                <div class="nav-link flex items-center px-6 py-3"><i class="fas fa-microscope mr-3 w-5"></i> Xét nghiệm
                    & CĐHA</div>
                <div class="px-6 mt-6 mb-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Vận hành &
                    Hậu cần</div>
                <div class="nav-link flex items-center px-6 py-3"><i class="fas fa-pills mr-3 w-5"></i> Quản lý kho dược
                </div>
                <div class="nav-link flex items-center px-6 py-3"><i class="fas fa-file-invoice-dollar mr-3 w-5"></i>
                    Viện phí & BHYT</div>
            </nav>

            <div class="p-6 border-t flex items-center justify-between transition-colors"
                :class="darkMode ? 'border-slate-800' : 'border-teal-100'">
                <div class="flex items-center gap-3">
                    <div class="status-dot"></div><span class="text-[10px] font-bold uppercase tracking-widest"
                        :class="darkMode ? 'text-slate-400' : 'text-teal-700'">Hệ thống sẵn sàng</span>
                </div>
                <button @click="darkMode = !darkMode; updateCharts()"
                    class="p-2 bg-teal-800 dark:bg-slate-700 text-teal-100 rounded-lg hover:scale-105 transition-transform"><i
                        :class="darkMode ? 'fas fa-sun' : 'fas fa-moon'"></i></button>
            </div>
        </aside>

        <div class="main-container">
            <header class="main-header shadow-sm">
                <div>
                    <h2 class="text-[10px] text-teal-600 font-bold uppercase tracking-widest">Cơ sở: Bệnh viện Quốc tế
                        SCP</h2>
                    <h3 class="text-2xl font-black uppercase tracking-tight transition-colors"
                        :class="darkMode ? 'text-white' : 'text-slate-800'">TRUNG TÂM ĐIỀU HÀNH HMIS</h3>
                </div>
                <div class="text-right">
                    <p class="text-[9px] opacity-50 uppercase font-bold transition-colors"
                        :class="darkMode ? 'text-white' : 'text-slate-900'">Tiêu thụ năng lượng</p>
                    <p class="text-xl font-black text-teal-600 tracking-tighter" x-text="liveKwh + ' kWh'"></p>
                </div>
            </header>

            <div class="content-scroll">
                <div x-show="section === 'overview'" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-7 gap-4">
                        <div class="stat-card border-teal-500/20"><span
                                class="text-[9px] font-bold text-slate-500 uppercase block">P. Mổ vô trùng</span>
                            <div class="text-xl font-black text-teal-600" x-text="temp + '°C'"></div>
                            <div class="h-[45px] mt-2"><canvas id="chartTemp"></canvas></div>
                        </div>
                        <div class="stat-card border-cyan-500/20"><span
                                class="text-[9px] font-bold text-slate-500 uppercase block">Độ ẩm kho thuốc</span>
                            <div class="text-xl font-black text-cyan-600" x-text="humid + '%'"></div>
                            <div class="h-[45px] mt-2"><canvas id="chartHumid"></canvas></div>
                        </div>
                        <div class="stat-card border-indigo-500/20"><span
                                class="text-[9px] font-bold text-slate-500 uppercase block"
                                :class="darkMode ? 'text-white' : 'text-slate-800'">Chất lượng khí</span>
                            <div class="text-xl font-black text-indigo-500" x-text="aqi"></div>
                            <div class="h-[45px] mt-2"><canvas id="chartAQI"></canvas></div>
                        </div>
                        <div class="stat-card"><span class="text-[9px] font-bold text-slate-500 uppercase block">Bệnh
                                nhân</span>
                            <div class="text-xl font-black" :class="darkMode ? 'text-white' : 'text-teal-900'">1,240
                            </div>
                            <div class="mt-4 text-[8px] text-teal-600 font-bold uppercase"><i
                                    class="fas fa-caret-up"></i> 2.5%</div>
                        </div>

                        <div class="stat-card border-teal-500/20"><span
                                class="text-[9px] font-bold text-slate-500 uppercase block">Tiếp nhận / Ngày</span>
                            <div class="text-xl font-black text-teal-600">444</div>
                            <div class="mt-4 h-1 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden">
                                <div class="bg-teal-500 h-full w-[75%]"></div>
                            </div>
                        </div>

                        <div class="stat-card"><span class="text-[9px] font-bold text-slate-500 uppercase block">Giường
                                trống</span>
                            <div class="text-xl font-black" :class="darkMode ? 'text-white' : 'text-slate-800'">42/500
                            </div>
                            <div class="mt-4 h-1 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden">
                                <div class="bg-teal-500 h-full w-[91%]"></div>
                            </div>
                        </div>
                        <div class="stat-card border-orange-500/20"><span
                                class="text-[9px] font-bold text-slate-500 uppercase block">Viện phí/Ngày</span>
                            <div class="text-xl font-black text-orange-600">845 Tr</div>
                            <div class="h-[45px] mt-2"><canvas id="chartFee"></canvas></div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="stat-card flex flex-col">
                            <h4 class="text-[10px] font-bold uppercase mb-4 text-teal-600 flex justify-between">
                                <span>Giám sát khu Cấp cứu</span><span
                                    class="text-red-500 animate-pulse font-black">LIVE</span>
                            </h4>
                            <div class="cam-container border border-teal-100 dark:border-slate-700 relative mb-4"><img
                                    src="https://images.unsplash.com/photo-1516549655169-df83a0774514?auto=format&fit=crop&w=600"
                                    class="w-full h-full object-cover opacity-80 dark:opacity-60">
                                <div
                                    class="absolute top-2 left-2 bg-teal-600 px-2 py-0.5 text-[8px] font-bold rounded uppercase text-white">
                                    ER Entrance - Cam 04</div>
                            </div><button
                                class="w-full py-2 bg-teal-50 dark:bg-slate-800 text-teal-700 dark:text-teal-400 text-[10px] font-black uppercase rounded-lg border border-teal-200 dark:border-slate-700">Xem
                                hệ thống Camera</button>
                        </div>
                        <div class="stat-card flex flex-col">
                            <h4 class="text-[10px] font-bold uppercase mb-4 text-teal-600">Trạng thái Xe cấp cứu</h4>
                            <div class="grid grid-cols-2 gap-2 text-[9px] font-black mb-4 transition-colors"
                                :class="darkMode ? 'text-white' : 'text-slate-700'">
                                <div class="p-2 bg-teal-50 dark:bg-slate-800/40 rounded flex justify-between"><span>Đang
                                        đi</span><span class="text-orange-500">03 <i
                                            class="fas fa-ambulance animate-pulse"></i></span></div>
                                <div class="p-2 bg-teal-50 dark:bg-slate-800/40 rounded flex justify-between"><span>Sẵn
                                        sàng</span><span class="text-teal-600">08 <i class="fas fa-check"></i></span>
                                </div>
                                <div class="p-2 bg-teal-50 dark:bg-slate-800/40 rounded flex justify-between"><span>Bảo
                                        trì</span><span class="text-slate-400">01</span></div>
                                <div class="p-2 bg-teal-50 dark:bg-slate-800/40 rounded flex justify-between"><span>Trực
                                        điểm</span><span class="text-teal-600">02</span></div>
                            </div>
                            <div class="flex-grow min-h-[140px]"><canvas id="chartElevator"></canvas></div>
                        </div>

                        <div class="stat-card flex flex-col border-emerald-500/30 bg-emerald-500/5">
                            <h4
                                class="text-[10px] font-bold uppercase mb-4 text-emerald-600 flex justify-between items-center">
                                <span>Giám sát Vệ sinh thời gian thực</span>
                                <span class="flex items-center gap-1.5"><span
                                        class="text-[8px] text-slate-400 uppercase" x-text="lastHkUpdate"></span>
                                    <div class="status-dot !bg-emerald-500"></div>
                                </span>
                            </h4>
                            <div class="flex-grow overflow-y-auto space-y-2 pr-1 custom-scroll"
                                style="max-height: 260px;">
                                <template x-for="log in housekeepingLogs">
                                    <div
                                        class="p-3 rounded-xl border border-emerald-500/20 bg-white/50 dark:bg-slate-800/50 shadow-sm transition-all hover:border-emerald-500/50">
                                        <div class="flex justify-between items-start mb-1.5"><span
                                                class="text-[11px] font-black text-slate-800 dark:text-white"
                                                x-text="log.loc"></span><span
                                                class="text-[8px] font-bold px-1.5 py-0.5 rounded bg-emerald-100 text-emerald-700 uppercase"
                                                x-text="log.status"></span></div>
                                        <div
                                            class="flex justify-between text-[9px] font-semibold text-slate-500 uppercase tracking-tight">
                                            <span><i class="fas fa-user text-[8px] mr-1"></i> <span
                                                    x-text="log.staff"></span></span><span><i
                                                    class="far fa-clock text-[8px] mr-1"></i> <span
                                                    x-text="log.time"></span></span>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                        <div class="stat-card p-4 flex items-center gap-3"><i class="fas fa-lungs text-teal-500"></i>
                            <div>
                                <p class="text-[8px] text-slate-500 uppercase font-bold">Hệ thống Oxy</p>
                                <p class="text-[10px] font-black" :class="darkMode ? 'text-white' : 'text-slate-700'">
                                    98% - Normal</p>
                            </div>
                        </div>
                        <div class="stat-card p-4 flex items-center gap-3 border-orange-200"><i
                                class="fas fa-biohazard text-orange-500"></i>
                            <div>
                                <p class="text-[8px] text-slate-500 uppercase font-bold">Rác y tế</p>
                                <p class="text-[10px] font-black text-orange-600">85% Đầy</p>
                            </div>
                        </div>
                        <div class="stat-card p-4 flex items-center gap-3"><i class="fas fa-tint text-cyan-500"></i>
                            <div>
                                <p class="text-[8px] text-slate-500 uppercase font-bold">Nước RO/Lọc</p>
                                <p class="text-[10px] font-black" :class="darkMode ? 'text-white' : 'text-slate-700'">Ổn
                                    định</p>
                            </div>
                        </div>
                        <div class="stat-card p-4 flex items-center gap-3"><i
                                class="fas fa-stethoscope text-indigo-500"></i>
                            <div>
                                <p class="text-[8px] text-slate-500 uppercase font-bold">Dụng cụ</p>
                                <p class="text-[10px] font-black" :class="darkMode ? 'text-white' : 'text-slate-700'">Đã
                                    khử khuẩn</p>
                            </div>
                        </div>
                        <div class="stat-card p-4 flex items-center gap-3 border-teal-200"><i
                                class="fas fa-shield-virus text-teal-600"></i>
                            <div>
                                <p class="text-[8px] text-slate-500 uppercase font-bold">Áp suất âm</p>
                                <p class="text-[10px] font-black text-teal-600">Active</p>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card overflow-hidden">
                        <div
                            class="p-4 bg-teal-50/50 dark:bg-slate-800/30 border-b dark:border-slate-700 border-teal-100 uppercase text-[10px] font-black text-teal-700">
                            Yêu cầu hỗ trợ khẩn cấp (Nurse Call)</div>
                        <table class="w-full text-left text-[11px]" :class="darkMode ? 'text-white' : 'text-slate-700'">
                            <tbody class="divide-y dark:divide-slate-800/50 divide-teal-50">
                                <tr class="cursor-pointer hover:bg-red-500/5">
                                    <td class="p-4 font-bold text-red-600">Giường 12-A</td>
                                    <td class="p-4 opacity-80 italic">Bệnh nhân đau tức ngực, cần hỗ trợ gấp</td>
                                    <td class="p-4 text-right text-red-600 font-bold uppercase text-[9px]">Khẩn cấp</td>
                                </tr>
                                <tr class="cursor-pointer hover:bg-teal-500/5">
                                    <td class="p-4 font-bold text-teal-600">P-405</td>
                                    <td class="p-4 opacity-80 italic">Yêu cầu thay băng, rửa vết thương</td>
                                    <td class="p-4 text-right"><span
                                            class="bg-teal-100 text-teal-700 px-2 py-0.5 rounded text-[9px] uppercase font-black">Đã
                                            xử lý</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div x-show="section === 'facility'" x-cloak class="h-full flex flex-col space-y-6">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-end gap-4">
                        <div>
                            <h2 class="text-[10px] text-orange-500 font-bold uppercase tracking-widest"
                                x-text="showAudit ? 'Hệ thống tự chấm điểm chất lượng' : 'Phòng thí nghiệm SCP-Facility'">
                            </h2>
                            <h3 class="text-2xl font-black uppercase transition-colors"
                                :class="darkMode ? 'text-white' : 'text-slate-800'"
                                x-text="showAudit ? 'Kiểm tra 83 Tiêu chí Bộ Y Tế' : 'Hệ thống bao quát & Cắt lớp'">
                            </h3>
                        </div>
                        <div x-show="!showAudit"
                            class="flex flex-wrap gap-2 bg-slate-100 dark:bg-slate-800 p-1.5 rounded-2xl border border-teal-500/20 shadow-inner">
                            <button @click="showLayer = 'arch'"
                                class="px-5 py-2.5 rounded-xl text-[10px] font-black uppercase transition-all duration-300"
                                :class="showLayer === 'arch' ? 'bg-teal-600 text-white shadow-lg scale-105' : 'text-slate-500 hover:text-teal-600'"><i
                                    class="fas fa-building mr-1.5"></i> Kiến trúc</button><button
                                @click="showLayer = 'electric'"
                                class="px-5 py-2.5 rounded-xl text-[10px] font-black uppercase transition-all duration-300"
                                :class="showLayer === 'electric' ? 'bg-yellow-500 text-white shadow-lg scale-105' : 'text-slate-500 hover:text-yellow-500'"><i
                                    class="fas fa-bolt mr-1.5"></i> Điện lưới</button><button
                                @click="showLayer = 'water'"
                                class="px-5 py-2.5 rounded-xl text-[10px] font-black uppercase transition-all duration-300"
                                :class="showLayer === 'water' ? 'bg-blue-500 text-white shadow-lg scale-105' : 'text-slate-500 hover:text-blue-500'"><i
                                    class="fas fa-faucet mr-1.5"></i> Nước sạch</button><button
                                @click="showLayer = 'fire'"
                                class="px-5 py-2.5 rounded-xl text-[10px] font-black uppercase transition-all duration-300"
                                :class="showLayer === 'fire' ? 'bg-red-600 text-white shadow-lg scale-105' : 'text-slate-500 hover:text-red-600'"><i
                                    class="fas fa-fire-extinguisher mr-1.5"></i> PCCC</button>
                        </div>
                        <div x-show="showAudit" @click="showAudit = false"
                            class="cursor-pointer bg-slate-900 text-white px-4 py-2 rounded-xl text-[10px] font-bold uppercase hover:bg-red-600 transition-colors">
                            <i class="fas fa-times mr-2"></i> Thoát chế độ chấm điểm
                        </div>
                    </div>
                    <div class="flex flex-grow gap-6 min-h-[500px]">
                        <div
                            class="relative flex-grow bg-slate-200 dark:bg-slate-900 rounded-3xl border-2 border-dashed border-slate-300 dark:border-slate-800 overflow-hidden shadow-2xl">
                            <div id="panzoom-container" class="absolute inset-0 cursor-grab active:cursor-grabbing">
                                <div class="absolute inset-0 flex items-center justify-center p-8"><img
                                        x-show="showLayer === 'arch'" src="assets/images/3d.png"
                                        class="max-w-full max-h-full object-contain animate-fade-in"
                                        alt="Architecture"><img x-show="showLayer === 'electric'"
                                        src="assets/images/3d-electric.png"
                                        class="max-w-full max-h-full object-contain animate-fade-in"
                                        alt="Electrical"><img x-show="showLayer === 'water'"
                                        src="assets/images/3d-water.png"
                                        class="max-w-full max-h-full object-contain animate-fade-in"
                                        alt="Water Systems"><img x-show="showLayer === 'fire'"
                                        src="assets/images/3d-fire.png"
                                        class="max-w-full max-h-full object-contain animate-fade-in" alt="Fire Safety">
                                    <div x-show="showLayer === 'fire'" @click="showModal = true"
                                        class="absolute top-[45%] left-[60%] w-8 h-8 bg-red-600/80 rounded-full animate-ping cursor-pointer border-4 border-white/30"
                                        title="Cảnh báo: Áp suất vòi phun thấp"></div>
                                </div>
                            </div>
                            <div class="absolute top-6 right-6 flex flex-col gap-2 pointer-events-none">
                                <div
                                    class="bg-black/60 backdrop-blur-xl border border-white/10 text-white text-[10px] px-4 py-2 rounded-2xl font-bold flex items-center shadow-lg">
                                    <i class="fas fa-mouse mr-2 text-teal-400"></i> Shift + Wheel để Zoom - Giữ để Kéo
                                </div>
                            </div>
                            <div class="absolute bottom-6 left-6 pointer-events-none">
                                <div
                                    class="bg-orange-500/90 backdrop-blur-md text-white text-[10px] px-4 py-2 rounded-2xl font-black uppercase tracking-widest shadow-lg">
                                    <i class="fas fa-flask mr-2"></i> Simulation Mode: Active
                                </div>
                            </div>
                        </div>
                        <div x-show="showAudit" x-transition
                            class="w-80 bg-white dark:bg-slate-800 rounded-3xl shadow-xl border border-teal-500/20 p-6 flex flex-col space-y-4">
                            <div class="space-y-1">
                                <p class="text-[9px] font-bold text-teal-600 uppercase">Tiêu chí đánh giá</p><select
                                    x-model="selectedCriteria"
                                    @change="if(selectedCriteria=='C2.1') showLayer='fire'; if(selectedCriteria=='C4.1') showLayer='electric'; if(selectedCriteria=='D2.2') showLayer='water';"
                                    class="w-full bg-slate-100 dark:bg-slate-900 border-none rounded-xl p-3 text-xs font-bold focus:ring-2 ring-teal-500 transition-colors">
                                    <option value="C2.1">C2.1: An toàn PCCC</option>
                                    <option value="C4.1">C4.1: Hệ thống Điện/Nước</option>
                                    <option value="D2.2">D2.2: Kiểm soát nhiễm khuẩn</option>
                                </select>
                            </div>
                            <div
                                class="bg-teal-50 dark:bg-teal-900/20 p-4 rounded-2xl border border-teal-100 dark:border-teal-800">
                                <p class="text-[10px] font-black text-teal-700 dark:text-teal-400 uppercase mb-2">Đích
                                    đến Mức 5</p>
                                <p class="text-[11px] leading-relaxed text-slate-600 dark:text-slate-300 italic">"Số hóa
                                    toàn bộ sơ đồ hạ tầng, có hệ thống giám sát kỹ thuật tập trung và cảnh báo thời gian
                                    thực."</p>
                            </div>
                            <div class="flex-grow space-y-3">
                                <p class="text-[10px] font-bold text-slate-400 uppercase">Tự chấm điểm</p>
                                <div class="grid grid-cols-5 gap-2"><template x-for="i in 5"><button
                                            class="h-10 rounded-lg font-black text-xs transition-all"
                                            :class="i <= 4 ? 'bg-teal-500 text-white shadow-lg' : 'bg-slate-100 dark:bg-slate-700 text-slate-400'"
                                            x-text="i"></button></template></div><textarea
                                    class="w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl p-3 text-[11px] h-24 placeholder:italic"
                                    placeholder="Nhập ghi chú minh chứng thực địa..."></textarea>
                            </div><button @click="showAudit = false"
                                class="w-full py-3 bg-teal-600 text-white text-[10px] font-black uppercase rounded-xl shadow-lg hover:scale-105 transition-transform">Lưu
                                và kết xuất báo cáo</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div x-show="showModal" x-cloak
        class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
        <div @click.away="showModal = false"
            class="bg-white dark:bg-slate-900 w-full max-w-md rounded-3xl shadow-2xl overflow-hidden border border-red-500/20 animate-fade-in">
            <div class="p-6 bg-red-600 text-white flex justify-between items-center">
                <div class="flex items-center gap-3"><i class="fas fa-exclamation-triangle animate-pulse text-xl"></i>
                    <h3 class="font-black uppercase tracking-tight">Chi tiết sự cố PCCC</h3>
                </div><button @click="showModal = false" class="text-white/80 hover:text-white"><i
                        class="fas fa-times"></i></button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <p class="text-[9px] font-bold text-slate-400 uppercase">Vị trí</p>
                    <p class="text-sm font-black text-slate-800 dark:text-white" x-text="pcccIssue.location"></p>
                </div>
                <div class="p-3 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800">
                    <p class="text-[9px] font-bold text-red-600 uppercase">Trạng thái hiện tại</p>
                    <p class="text-xs font-bold text-red-700 dark:text-red-400" x-text="pcccIssue.status"></p>
                </div>
                <div>
                    <p class="text-[9px] font-bold text-slate-400 uppercase">Thông tin chi tiết</p>
                    <p class="text-xs text-slate-600 dark:text-slate-400 leading-relaxed" x-text="pcccIssue.detail"></p>
                </div>
                <div
                    class="p-4 bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700">
                    <p class="text-[9px] font-bold text-teal-600 uppercase mb-2">Quy trình xử lý đề xuất</p>
                    <p class="text-[11px] text-slate-700 dark:text-slate-300 whitespace-pre-line leading-loose"
                        x-text="pcccIssue.action"></p>
                </div><button @click="showModal = false"
                    class="w-full py-3 bg-slate-900 dark:bg-teal-600 text-white text-xs font-black uppercase rounded-xl hover:opacity-90 transition-opacity">Đã
                    xác nhận & Điều phối</button>
            </div>
        </div>
    </div>


</body>

</html>